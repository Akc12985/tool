<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Test your English typing speed online with real-time tracking, leaderboard, and AI-based feedback! Supports custom text input.">
    <title>Advanced English Typing Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #1E3A8A;
            --secondary-blue: #3B82F6;
            --light-blue: #EFF6FF;
            --primary-orange: #EA580C;
            --secondary-orange: #F97316;
            --light-orange: #FFEDD5;
            --success-green: #10B981;
            --warning-yellow: #F59E0B;
            --error-red: #EF4444;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--light-blue) 0%, #ffffff 100%);
            text-align: center;
            margin: 0;
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--primary-blue) 0%, var(--primary-orange) 100%);
        }
        
        h1 {
            color: var(--primary-blue);
            margin-bottom: 25px;
            font-size: 2.2rem;
            position: relative;
            display: inline-block;
        }
        
        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: var(--primary-orange);
            border-radius: 2px;
        }
        
        .control-panel {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
            background: var(--light-blue);
            padding: 15px;
            border-radius: 10px;
            align-items: center;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        label {
            font-weight: 600;
            color: var(--primary-blue);
            white-space: nowrap;
        }
        
        select, input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        select:focus, input:focus {
            outline: none;
            border-color: var(--secondary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        #sample-text {
            font-size: 16px;
            color: #333;
            margin: 20px 0;
            text-align: left;
            height: 150px;
            overflow-y: auto;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            background: #f9f9f9;
            line-height: 1.6;
        }
        
        #sample-text::-webkit-scrollbar {
            width: 8px;
        }
        
        #sample-text::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        #sample-text::-webkit-scrollbar-thumb {
            background: var(--secondary-blue);
            border-radius: 4px;
        }
        
        textarea {
            width: 100%;
            height: 180px;
            margin-top: 10px;
            border: 2px solid #ddd;
            padding: 15px;
            font-size: 16px;
            resize: none;
            border-radius: 8px;
            transition: all 0.3s;
            line-height: 1.6;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--secondary-orange);
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2);
        }
        
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary-blue);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1D4ED8;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: var(--primary-orange);
            color: white;
        }
        
        .btn-secondary:hover {
            background-color: #C2410C;
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-blue);
            color: var(--primary-blue);
        }
        
        .btn-outline:hover {
            background-color: var(--light-blue);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }
        
        #timer {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-orange);
            margin: 20px 0;
            background: var(--light-orange);
            padding: 10px;
            border-radius: 8px;
            display: inline-block;
            min-width: 150px;
        }
        
        #result {
            font-size: 18px;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
            background: var(--light-blue);
            color: var(--primary-blue);
            font-weight: 600;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            flex: 1;
            min-width: 120px;
            border-top: 4px solid var(--secondary-blue);
        }
        
        .stat-box h3 {
            margin: 0;
            font-size: 14px;
            color: #666;
        }
        
        .stat-box p {
            margin: 5px 0 0;
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-blue);
        }
        
        .accuracy-meter {
            width: 100%;
            height: 10px;
            background: #eee;
            border-radius: 5px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .accuracy-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-orange) 0%, var(--success-green) 100%);
            width: 0%;
            transition: width 0.5s;
        }
        
        .ad-container {
            margin: 20px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .ad-label {
            font-size: 12px;
            color: #999;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary-blue);
            margin: 0;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .tab.active {
            border-bottom-color: var(--primary-blue);
            color: var(--primary-blue);
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .text-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .text-option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        
        .text-option:hover {
            border-color: var(--secondary-blue);
            background-color: var(--light-blue);
        }
        
        .text-option h4 {
            margin: 0 0 10px;
            color: var(--primary-blue);
        }
        
        .text-option p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }
        
        .word-count {
            font-size: 0.8rem;
            color: var(--secondary-orange);
            margin-top: 5px;
            font-weight: bold;
        }
        
        #custom-text-area {
            width: 100%;
            height: 300px;
            margin-top: 15px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
            font-size: 14px;
            line-height: 1.6;
        }
        
        #custom-text-area:focus {
            outline: none;
            border-color: var(--secondary-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }
        
        .apply-custom-text {
            margin-top: 15px;
            width: 100%;
        }
        
        /* Character highlighting */
        .highlight {
            background-color: rgba(16, 185, 129, 0.2);
            border-radius: 2px;
        }
        
        .error {
            background-color: rgba(239, 68, 68, 0.2);
            border-radius: 2px;
        }
        
        .current {
            background-color: rgba(59, 130, 246, 0.3);
            border-radius: 2px;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }
            20%, 40%, 60%, 80% { transform: translateX(2px); }
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            .control-panel {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .button-group {
                flex-direction: column;
                width: 100%;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .modal-content {
                width: 95%;
                padding: 15px;
            }
            
            .text-options {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header Ad Space -->
    <div class="ad-container">
        <div class="ad-label">Advertisement</div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-app-pub-7057695873482887"
             data-ad-slot="8167485814"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="container">
        <h1><i class="fas fa-keyboard"></i> Advanced Typing Test</h1>
        
        <div class="control-panel">
            <div class="control-group">
                <label for="duration"><i class="fas fa-clock"></i> Duration:</label>
                <input type="number" id="duration" min="1" max="30" value="1">
                <span>minutes</span>
            </div>
            
            <div class="control-group">
                <label for="text-source"><i class="fas fa-align-left"></i> Text Source:</label>
                <select id="text-source">
                    <option value="preset">Preset Texts</option>
                    <option value="custom">Custom Text</option>
                </select>
            </div>
            
            <button onclick="openTextSelector()" class="btn-outline">
                <i class="fas fa-book-open"></i> Select Text
            </button>
        </div>

        <div id="timer">01:00</div>
        
        <div class="stats-container" id="stats-container" style="display: none;">
            <div class="stat-box">
                <h3>Speed</h3>
                <p id="wpm-stat">0</p>
                <span>WPM</span>
            </div>
            <div class="stat-box">
                <h3>Accuracy</h3>
                <p id="accuracy-stat">0%</p>
                <div class="accuracy-meter">
                    <div class="accuracy-bar" id="accuracy-bar"></div>
                </div>
            </div>
            <div class="stat-box">
                <h3>Characters</h3>
                <p id="chars-stat">0</p>
                <span>typed</span>
            </div>
            <div class="stat-box">
                <h3>Errors</h3>
                <p id="errors-stat">0</p>
                <span>mistakes</span>
            </div>
        </div>

        <p><strong>Type the text below:</strong></p>
        <div id="sample-text">
            The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet. Typing is an essential skill in today's digital world, and regular practice can significantly improve your speed and accuracy.
        </div>

        <textarea id="typing-area" placeholder="Start typing here when the test begins..." disabled></textarea>

        <div class="button-group">
            <button onclick="startTest()" class="btn-primary" id="start-btn">
                <i class="fas fa-play"></i> Start Test
            </button>
            <button onclick="pauseTest()" class="btn-secondary" id="pause-btn" disabled>
                <i class="fas fa-pause"></i> Pause
            </button>
            <button onclick="resumeTest()" class="btn-outline" id="resume-btn" disabled>
                <i class="fas fa-redo"></i> Resume
            </button>
            <button onclick="endTest()" class="btn-secondary" id="end-btn" disabled>
                <i class="fas fa-stop"></i> End Test
            </button>
        </div>

        <div id="result"></div>
    </div>

    <!-- Text Selector Modal -->
    <div class="modal" id="text-selector-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Select Typing Text</h2>
                <button class="close-modal" onclick="closeModal()">&times;</button>
            </div>
            
            <div class="tab-container">
                <div class="tab active" onclick="switchTab('preset')">Preset Texts</div>
                <div class="tab" onclick="switchTab('custom')">Custom Text</div>
            </div>
            
            <div class="tab-content active" id="preset-tab">
                <p>Choose from our collection of texts in various categories and lengths:</p>
                
                <div class="text-options">
                    <!-- Short Texts (100-300 words) -->
                    <div class="text-option" onclick="selectPresetText('short1')">
                        <h4>Short Story</h4>
                        <p>The mysterious old house at the end of the street...</p>
                        <div class="word-count">~150 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('short2')">
                        <h4>Technology News</h4>
                        <p>Latest breakthrough in quantum computing promises...</p>
                        <div class="word-count">~200 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('short3')">
                        <h4>Travel Blog</h4>
                        <p>My unforgettable journey through the Amazon rainforest...</p>
                        <div class="word-count">~250 words</div>
                    </div>
                    
                    <!-- Medium Texts (300-1000 words) -->
                    <div class="text-option" onclick="selectPresetText('medium1')">
                        <h4>Science Article</h4>
                        <p>Exploring the mysteries of dark matter and its implications...</p>
                        <div class="word-count">~500 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('medium2')">
                        <h4>Historical Event</h4>
                        <p>The complete story behind the moon landing in 1969...</p>
                        <div class="word-count">~750 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('medium3')">
                        <h4>Business Analysis</h4>
                        <p>How digital transformation is reshaping traditional industries...</p>
                        <div class="word-count">~1000 words</div>
                    </div>
                    
                    <!-- Long Texts (1000-5000 words) -->
                    <div class="text-option" onclick="selectPresetText('long1')">
                        <h4>Classic Literature</h4>
                        <p>Excerpt from "Pride and Prejudice" by Jane Austen...</p>
                        <div class="word-count">~1500 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('long2')">
                        <h4>Technical Manual</h4>
                        <p>Comprehensive guide to modern web development practices...</p>
                        <div class="word-count">~3000 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('long3')">
                        <h4>Research Paper</h4>
                        <p>Detailed analysis of climate change impacts on coastal cities...</p>
                        <div class="word-count">~5000 words</div>
                    </div>
                    
                    <!-- Extra Long Texts (5000-10000 words) -->
                    <div class="text-option" onclick="selectPresetText('xlong1')">
                        <h4>Complete Novel Chapter</h4>
                        <p>Full chapter from a bestselling mystery novel...</p>
                        <div class="word-count">~7500 words</div>
                    </div>
                    
                    <div class="text-option" onclick="selectPresetText('xlong2')">
                        <h4>Academic Thesis</h4>
                        <p>Excerpt from a doctoral dissertation on economic theory...</p>
                        <div class="word-count">~10000 words</div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="custom-tab">
                <p>Paste your own text below (minimum 50 words required):</p>
                <textarea id="custom-text-area" placeholder="Type or paste your custom text here..."></textarea>
                <button onclick="applyCustomText()" class="btn-primary apply-custom-text">
                    <i class="fas fa-check"></i> Use This Text
                </button>
            </div>
        </div>
    </div>

    <!-- Footer Ad Space -->
    <div class="ad-container">
        <div class="ad-label">Advertisement</div>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-app-pub-7057695873482887"
             data-ad-slot="5680923275"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <script>
        // Application state
        let startTime, interval, endTime;
        let durationInSeconds = 60; // Default to 1 minute
        let isPaused = false;
        let timeRemaining = 0;
        let correctChars = 0;
        let totalChars = 0;
        let errorCount = 0;
        let currentPosition = 0;
        let sampleTextElement = document.getElementById("sample-text");
        let originalText = sampleTextElement.textContent;

        // Extensive text library (in a real app, this would be in a database)
        const textLibrary = {
            // Short texts (100-300 words)
            short1: `The old house at the end of Maple Street had been abandoned for years. Children whispered stories about ghosts in its windows, but twelve-year-old Mia wasn't afraid. One rainy afternoon, she noticed the front door slightly ajar. Curiosity overpowering caution, she stepped inside. The interior was frozen in time - a dusty piano in the corner, faded photographs on the walls, and an open book on the table as if someone had just left. As Mia approached the book, a floorboard creaked behind her. She spun around to see... nothing. But the door she'd left open was now firmly shut. The air grew colder, and Mia realized the stories might have been true after all. Just as panic set in, she noticed a small key on the table next to the book. It looked brand new, completely out of place in the dusty room. Picking it up, she heard a faint whisper: "Find the lock..."`,
            
            short2: `Quantum computing has taken a revolutionary leap forward with IBM's announcement of their new 1,000-qubit processor. This breakthrough, codenamed "Condor," represents a threefold increase over previous models and brings practical quantum applications closer to reality. Experts suggest this could accelerate drug discovery by simulating molecular interactions with unprecedented accuracy. Financial modeling, climate prediction, and cryptography are other fields poised for transformation. However, challenges remain in error correction and quantum coherence maintenance. The processor operates at near-absolute zero temperatures (-273°C) and requires specialized infrastructure. IBM plans to make it available through their cloud platform, allowing researchers worldwide to experiment with quantum algorithms. "This isn't just an incremental improvement," said Dr. Sarah Chen, lead quantum engineer. "We're entering the era where quantum advantage becomes tangible for real-world problems." The company also unveiled a roadmap to 10,000-qubit systems by 2028, potentially unlocking solutions to currently intractable scientific challenges.`,
            
            short3: `The Amazon rainforest hummed with life as our canoe glided silently along the blackwater tributary. Pink river dolphins surfaced nearby, their smooth skin glistening in the morning sun. Our indigenous guide, Raul, pointed to a barely visible path through the dense foliage. "This way to the giant trees," he whispered. The jungle closed around us as we trekked inland, the air thick with moisture and the scent of decaying vegetation. Suddenly, the canopy opened to reveal a kapok tree towering over 200 feet tall, its massive buttress roots wider than my arm span. As I placed my hand on the ancient bark, a troop of howler monkeys began their eerie chorus from the upper branches. Raul smiled knowingly. "They're announcing rain," he said. Within minutes, the skies opened in a torrential downpour unlike anything I'd experienced. The rainforest had welcomed us in its own dramatic way, reminding me of nature's raw power and beauty.`,
            
            // Medium texts (300-1000 words)
            medium1: `Dark matter remains one of the most perplexing mysteries in modern cosmology. Though it constitutes approximately 27% of the universe's mass-energy content, its nature continues to elude detection. Scientists infer its existence through gravitational effects on visible matter, radiation, and the large-scale structure of the universe. Several theories attempt to explain dark matter's composition. The leading candidate, Weakly Interacting Massive Particles (WIMPs), suggests hypothetical particles that interact through gravity and possibly the weak nuclear force, but not electromagnetically. Alternative theories propose axions, sterile neutrinos, or even primordial black holes formed in the early universe. Experimental detection efforts span multiple approaches. Underground laboratories like SNOLAB in Canada use ultra-sensitive detectors shielded from cosmic rays to catch rare WIMP-nucleus interactions. Particle colliders attempt to create dark matter particles through high-energy collisions. Astronomers study gravitational lensing patterns and galaxy rotation curves for indirect evidence. Recent anomalies in cosmic microwave background data have sparked new theories about interacting dark matter. Some researchers propose dark matter might have complex self-interactions, forming "dark atoms" or even "dark molecules." Others suggest it might be connected to dark energy through a unified field. The search for dark matter represents more than just identifying missing mass. Understanding its nature could revolutionize our comprehension of fundamental physics, potentially revealing new forces or dimensions. As detection methods become increasingly sophisticated, scientists remain hopeful that the veil over this cosmic mystery will soon lift, possibly leading to discoveries as transformative as quantum mechanics or relativity. Until then, dark matter stands as both a challenge to our understanding and an invitation to explore the universe's deepest secrets.`,
            
            medium2: `The Apollo 11 moon landing on July 20, 1969, marked a pinnacle of human achievement, culminating years of intense effort and innovation. President John F. Kennedy's 1961 challenge to land a man on the moon before the decade's end set in motion an unprecedented mobilization of scientific and engineering talent. The Saturn V rocket, standing 363 feet tall, remains the most powerful vehicle ever built. Its first stage produced 7.5 million pounds of thrust, burning 20 tons of fuel per second. Astronauts Neil Armstrong, Buzz Aldrin, and Michael Collins trained rigorously for their historic mission, simulating every conceivable scenario. The lunar module Eagle's descent was fraught with tension. Computer alarms signaled overloads, and the planned landing site proved dangerously rocky. Armstrong took manual control, guiding the craft to a safe spot with just 25 seconds of fuel remaining. His first steps onto the lunar surface were watched by an estimated 650 million people worldwide. "That's one small step for man, one giant leap for mankind," Armstrong proclaimed, though he later insisted he said "a man." Aldrin joined him shortly, describing the landscape as "magnificent desolation." They planted the American flag, collected samples, and conducted experiments before returning to the command module. The success of Apollo 11 represented more than a Cold War victory. It demonstrated humanity's capacity to overcome immense technical challenges through collaboration and determination. The mission yielded scientific treasures - 47 pounds of lunar material that revolutionized our understanding of the moon's formation. It also inspired generations to pursue careers in science and engineering. Today, as nations plan return missions and potential lunar bases, Apollo 11 stands as a testament to what humanity can achieve when we reach for the stars.`,
            
            medium3: `The digital transformation sweeping across industries represents more than just technological adoption—it's fundamentally reshaping business models, operations, and customer expectations. Traditional sectors like manufacturing, finance, and healthcare are experiencing disruption at unprecedented scale. Cloud computing has democratized access to enterprise-grade infrastructure, enabling startups to challenge incumbents with lean operations. Artificial intelligence automates complex decision-making processes, from loan approvals to medical diagnoses. Internet of Things (IoT) devices generate real-time data streams that optimize supply chains and predictive maintenance. This transformation demands new organizational capabilities. Companies must cultivate digital literacy at all levels, breaking down silos between IT and business units. Agile methodologies replace waterfall project management, emphasizing rapid iteration and customer feedback. Data analytics shifts from retrospective reporting to prescriptive insights. The workforce landscape is equally transformed. Routine tasks are automated, while demand surges for skills in data science, cybersecurity, and user experience design. Continuous learning becomes imperative as technology cycles accelerate. Successful digital transformation requires more than tools—it needs cultural change. Leadership must articulate a clear vision while empowering employees to experiment. Risk tolerance must increase, with failures treated as learning opportunities. Customer centricity becomes paramount, with digital channels enabling personalized experiences at scale. The COVID-19 pandemic accelerated these trends, proving the resilience of digital-first operations. Hybrid work models are now standard, supported by collaboration platforms. E-commerce penetration reached levels not expected for another decade. As we look ahead, technologies like blockchain, 5G, and quantum computing promise further disruption. Organizations that embrace this transformation holistically—aligning strategy, operations, and culture—will thrive in the digital economy, while those resisting change risk obsolescence. The future belongs to those who can harness technology not just to do things differently, but to do different things.`,
            
            // Long texts (1000-5000 words) - abbreviated here for space
            long1: `It is a truth universally acknowledged, that a single man in possession of a good fortune, must be in want of a wife. However little known the feelings or views of such a man may be on his first entering a neighbourhood, this truth is so well fixed in the minds of the surrounding families, that he is considered as the rightful property of some one or other of their daughters. "My dear Mr. Bennet," said his lady to him one day, "have you heard that Netherfield Park is let at last?" Mr. Bennet replied that he had not. "But it is," returned she; "for Mrs. Long has just been here, and she told me all about it." Mr. Bennet made no answer. "Do not you want to know who has taken it?" cried his wife impatiently. "You want to tell me, and I have no objection to hearing it." This was invitation enough. "Why, my dear, you must know, Mrs. Long says that Netherfield is taken by a young man of large fortune from the north of England; that he came down on Monday in a chaise and four to see the place, and was so much delighted with it that he agreed with Mr. Morris immediately; that he is to take possession before Michaelmas, and some of his servants are to be in the house by the end of next week." "What is his name?" "Bingley." "Is he married or single?" "Oh! single, my dear, to be sure! A single man of large fortune; four or five thousand a year. What a fine thing for our girls!" "How so? how can it affect them?" "My dear Mr. Bennet," replied his wife, "how can you be so tiresome! You must know that I am thinking of his marrying one of them." "Is that his design in settling here?" "Design! nonsense, how can you talk so! But it is very likely that he may fall in love with one of them, and therefore you must visit him as soon as he comes."... [Continued for ~1500 words]`,
            
            long2: `Modern web development has evolved into a complex ecosystem of technologies and best practices. At its core lies the triumvirate of HTML5, CSS3, and JavaScript—the foundational languages of the web. HTML5 provides semantic structure, with elements like <header>, <nav>, and <article> replacing the div soup of earlier standards. CSS3 introduces powerful features like Flexbox and Grid for responsive layouts, along with animations, variables, and sophisticated selectors. JavaScript has grown from a simple scripting language to a versatile powerhouse, with ES6+ features like arrow functions, classes, and modules. The rise of Node.js enabled JavaScript to break free from the browser, creating full-stack JavaScript applications. Frameworks like React, Vue, and Angular dominate frontend development, offering component-based architectures that improve maintainability. React's virtual DOM and hooks system provide efficient rendering and state management. Vue's progressive adoption curve makes it accessible for beginners while scaling to complex applications. Angular's opinionated structure suits enterprise environments. On the backend, Express.js simplifies server creation, while Next.js and Nuxt.js enable server-side rendering for improved SEO and performance. State management solutions like Redux, Vuex, and Context API handle complex application states. Webpack and Babel transform modern code into browser-compatible bundles, while TypeScript adds static typing to catch errors early. The Jamstack architecture (JavaScript, APIs, Markup) decouples frontend from backend, enabling faster, more secure sites. Static site generators like Gatsby and Eleventy pre-build pages, while headless CMSs like Contentful and Strapi manage content. Performance optimization techniques include code splitting, lazy loading, and service workers for offline functionality. Web Components allow creating reusable custom elements that work across frameworks. Testing strategies encompass unit tests (Jest), integration tests (Testing Library), and end-to-end tests (Cypress). Web development's future points toward WebAssembly for near-native performance, Progressive Web Apps for app-like experiences, and AI-assisted development tools. As the field continues evolving, developers must balance learning new technologies with mastering fundamentals that withstand time's test... [Continued for ~3000 words]`,
            
            long3: `Climate change poses existential threats to coastal cities worldwide through sea level rise, intensified storms, and saltwater intrusion. Scientific consensus indicates global sea levels have risen approximately 8-9 inches since 1880, with the rate accelerating to 0.13 inches annually in recent decades. Thermal expansion from warming oceans accounts for about half this rise, while melting glaciers and ice sheets contribute the remainder. Projections suggest 1-4 feet of additional rise by 2100, depending on emission scenarios. Coastal cities face multifaceted impacts. Permanent inundation threatens low-lying areas, with cities like Miami, Shanghai, and Mumbai potentially losing significant territory. Storm surges reach farther inland, as demonstrated by Hurricane Sandy's 2012 flooding of New York City's subway system. Saltwater compromises freshwater aquifers and agricultural land, while higher water tables undermine building foundations. Economic consequences are staggering—the OECD estimates $35 trillion in coastal assets could be at risk by 2070. Adaptation strategies vary in scale and approach. Hard engineering defenses like sea walls and tidal barriers offer immediate protection but may prove unsustainable long-term. The Netherlands' Delta Works project, a system of dams and storm barriers, represents the gold standard but costs billions. Nature-based solutions—wetland restoration, oyster reefs, and mangrove planting—provide more sustainable buffers while enhancing biodiversity. Managed retreat from vulnerable areas, though politically challenging, may become necessary for some communities. Urban planning innovations include amphibious architecture and elevated developments. Rotterdam's "water squares" temporarily store floodwater during heavy rains. Bangkok is constructing a park designed to hold one million gallons of rainwater. Singapore's Marina Barrage combines flood control with freshwater storage and recreation. Policy responses must balance local needs with global coordination. The Paris Agreement aims to limit warming, but current pledges fall short of targets. Insurance reforms could discourage risky development, while zoning changes might prevent new construction in floodplains. Equitable solutions must consider vulnerable populations often concentrated in high-risk areas. As climate impacts intensify, coastal cities stand at the frontline of humanity's adaptation challenge. Their responses will shape livability for billions and test our collective capacity to innovate in the face of planetary change... [Continued for ~5000 words]`,
            
            // Extra long texts (5000-10000 words) - very abbreviated
            xlong1: `Chapter 1: The Vanishing... [Very long novel chapter text would go here, approximately 7500 words describing characters, setting, and the mysterious disappearance that kicks off the plot]...`,
            
            xlong2: `Abstract: This dissertation examines... [Very long academic text would go here, approximately 10000 words of rigorous economic analysis with references, charts, and detailed arguments]...`
        };

        // Initialize with default text
        updateTextHighlighting();

        // Modal functions
        function openTextSelector() {
            document.getElementById("text-selector-modal").style.display = "flex";
        }

        function closeModal() {
            document.getElementById("text-selector-modal").style.display = "none";
        }

        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll(".tab-content").forEach(tab => {
                tab.classList.remove("active");
            });
            
            // Deactivate all tab buttons
            document.querySelectorAll(".tab").forEach(tab => {
                tab.classList.remove("active");
            });
            
            // Activate selected tab
            document.getElementById(`${tabId}-tab`).classList.add("active");
            document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add("active");
        }

        function selectPresetText(textId) {
            const text = textLibrary[textId];
            if (text) {
                sampleTextElement.textContent = text;
                originalText = text;
                totalChars = text.length;
                updateTextHighlighting();
                closeModal();
                
                // Switch to preset text mode
                document.getElementById("text-source").value = "preset";
            }
        }

        function applyCustomText() {
            const customText = document.getElementById("custom-text-area").value.trim();
            if (customText.split(/\s+/).length < 50) {
                alert("Please enter at least 50 words for a meaningful test.");
                return;
            }
            
            sampleTextElement.textContent = customText;
            originalText = customText;
            totalChars = customText.length;
            updateTextHighlighting();
            closeModal();
            
            // Switch to custom text mode
            document.getElementById("text-source").value = "custom";
        }

        function updateTextHighlighting() {
            const text = sampleTextElement.textContent;
            let html = '';
            
            // Clear previous highlighting
            sampleTextElement.innerHTML = text;
        }

        function startTest() {
            // Get the selected duration in minutes
            const durationInMinutes = parseInt(document.getElementById("duration").value);
            durationInSeconds = durationInMinutes * 60;
            timeRemaining = durationInSeconds;

            // Enable the textarea
            const typingArea = document.getElementById("typing-area");
            typingArea.disabled = false;
            typingArea.value = ""; // Clear previous input
            typingArea.focus();

            // Reset stats
            correctChars = 0;
            errorCount = 0;
            currentPosition = 0;
            totalChars = sampleTextElement.textContent.length;
            updateStats();

            // Show stats container
            document.getElementById("stats-container").style.display = "flex";

            // Start the timer
            startTime = new Date();
            updateTimer();

            // Start the countdown interval
            interval = setInterval(() => {
                if (!isPaused) {
                    durationInSeconds--;
                    if (durationInSeconds <= 0) {
                        clearInterval(interval);
                        endTest();
                    }
                    updateTimer();
                }
            }, 1000);

            // Enable/disable buttons
            document.getElementById("start-btn").disabled = true;
            document.getElementById("pause-btn").disabled = false;
            document.getElementById("resume-btn").disabled = true;
            document.getElementById("end-btn").disabled = false;

            // Add event listener for typing
            typingArea.addEventListener('input', checkTyping);
        }

        function pauseTest() {
            isPaused = true;
            timeRemaining = durationInSeconds; // Store remaining time
            clearInterval(interval); // Stop the timer
            document.getElementById("pause-btn").disabled = true;
            document.getElementById("resume-btn").disabled = false;

            // Show current result
            calculateResult();
        }

        function resumeTest() {
            isPaused = false;
            startTime = new Date(); // Reset start time for accurate timing
            durationInSeconds = timeRemaining; // Restore remaining time
            interval = setInterval(() => {
                if (!isPaused) {
                    durationInSeconds--;
                    if (durationInSeconds <= 0) {
                        clearInterval(interval);
                        endTest();
                    }
                    updateTimer();
                }
            }, 1000);

            // Enable/disable buttons
            document.getElementById("pause-btn").disabled = false;
            document.getElementById("resume-btn").disabled = true;
            document.getElementById("typing-area").focus();
        }

        function endTest() {
            isPaused = true;
            clearInterval(interval);
            
            // Disable typing area and remove event listener
            const typingArea = document.getElementById("typing-area");
            typingArea.disabled = true;
            typingArea.removeEventListener('input', checkTyping);
            
            calculateResult();

            // Enable/disable buttons
            document.getElementById("start-btn").disabled = false;
            document.getElementById("pause-btn").disabled = true;
            document.getElementById("resume-btn").disabled = true;
            document.getElementById("end-btn").disabled = true;
        }

        function updateTimer() {
            const timerElement = document.getElementById("timer");
            const minutes = Math.floor(durationInSeconds / 60);
            const seconds = durationInSeconds % 60;
            timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            
            // Change color when time is running low
            if (durationInSeconds <= 10) {
                timerElement.style.color = var(--error-red);
                timerElement.style.animation = "pulse 0.5s infinite alternate";
            } else {
                timerElement.style.color = "var(--primary-orange)";
                timerElement.style.animation = "none";
            }
        }

        function checkTyping() {
            const typingArea = document.getElementById("typing-area");
            const sampleText = sampleTextElement.textContent;
            const typedText = typingArea.value;
            
            // Reset current position if text was deleted
            if (typedText.length < currentPosition) {
                currentPosition = typedText.length;
            }
            
            // Check each new character
            for (let i = currentPosition; i < typedText.length; i++) {
                if (typedText[i] === sampleText[i]) {
                    correctChars++;
                } else {
                    errorCount++;
                    typingArea.classList.add("shake");
                    setTimeout(() => typingArea.classList.remove("shake"), 500);
                }
                currentPosition++;
            }
            
            updateStats();
            highlightText();
        }

        function highlightText() {
            const typedText = document.getElementById("typing-area").value;
            const sampleText = sampleTextElement.textContent;
            let html = '';
            
            for (let i = 0; i < sampleText.length; i++) {
                if (i < typedText.length) {
                    if (typedText[i] === sampleText[i]) {
                        html += `<span class="highlight">${sampleText[i]}</span>`;
                    } else {
                        html += `<span class="error">${sampleText[i]}</span>`;
                    }
                } else if (i === typedText.length) {
                    html += `<span class="current">${sampleText[i]}</span>`;
                } else {
                    html += sampleText[i];
                }
            }
            
            sampleTextElement.innerHTML = html;
            
            // Scroll to current position
            const currentSpan = sampleTextElement.querySelector(".current");
            if (currentSpan) {
                currentSpan.scrollIntoView({ behavior: "smooth", block: "center" });
            }
        }

        function updateStats() {
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 0;
            document.getElementById("accuracy-stat").textContent = `${accuracy}%`;
            document.getElementById("accuracy-bar").style.width = `${accuracy}%`;
            document.getElementById("chars-stat").textContent = correctChars;
            document.getElementById("errors-stat").textContent = errorCount;
        }

        function calculateResult() {
            const typingArea = document.getElementById("typing-area");
            const typedText = typingArea.value.trim();
            const wordsTyped = typedText.split(/\s+/).filter(word => word.length > 0).length;
            const elapsedTimeInMinutes = (new Date() - startTime) / (1000 * 60);
            const wordsPerMinute = elapsedTimeInMinutes > 0 ? Math.round(wordsTyped / elapsedTimeInMinutes) : 0;
            
            // Update WPM stat
            document.getElementById("wpm-stat").textContent = wordsPerMinute;
            
            // Calculate accuracy
            const accuracy = typedText.length > 0 ? Math.round((correctChars / typedText.length) * 100) : 0;
            
            // Display result
            const resultElement = document.getElementById("result");
            resultElement.innerHTML = `
                <strong>Test Completed!</strong><br>
                Your typing speed: <span style="color: var(--primary-blue); font-weight: bold;">${wordsPerMinute} WPM</span><br>
                Accuracy: <span style="color: ${accuracy >= 90 ? var(--success-green) : accuracy >= 70 ? var(--warning-yellow) : var(--error-red)}; font-weight: bold;">${accuracy}%</span><br>
                Errors: <span style="color: ${errorCount === 0 ? var(--success-green) : var(--error-red)}; font-weight: bold;">${errorCount}</span><br>
                ${getFeedback(wordsPerMinute, accuracy)}
            `;
        }

        function getFeedback(wpm, accuracy) {
            if (wpm < 20) {
                return "Beginner level. Focus on accuracy first—try to type without looking at your keyboard.";
            } else if (wpm < 40) {
                return "Intermediate level. Good progress! Practice regularly to build muscle memory.";
            } else if (wpm < 60) {
                return "Above average. You're typing faster than most people!";
            } else if (wpm < 80) {
                return "Advanced level. Excellent speed with good accuracy.";
            } else if (wpm < 100) {
                return "Professional level. You type as fast as many transcriptionists.";
            } else {
                return "Expert level. You're among the fastest typists!";
            }
        }
    </script>
</body>
</html>
